<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GigPi — Pi-powered gig & shop marketplace</title>

  <!-- Google Font + Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- App styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="brand">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><rect rx='8' width='100%' height='100%' fill='%23131921'/><text x='50%' y='55%' font-family='Roboto' font-size='18' fill='%23ffd814' text-anchor='middle'>π</text></svg>" alt="logo" class="logo">
        <h1>GigPi</h1>
      </div>
      <div class="header-actions">
        <button class="btn" id="btnPostGig"><i class="fa-solid fa-briefcase"></i> Post Gig</button>
        <button class="btn" id="btnRegisterShop"><i class="fa-solid fa-shop"></i> Register Shop</button>
        <button class="btn" id="btnDelivery"><i class="fa-solid fa-clock"></i> Delivery</button>
      </div>
    </header>

    <main class="container">
      <!-- Map -->
      <section id="map-section" class="card">
        <div class="map-header">
          <strong>Nearby Gigs & Shops</strong>
          <div>
            <button class="icon-btn" id="btnLocate" title="Locate me"><i class="fa-solid fa-location-crosshairs"></i></button>
            <button class="icon-btn" id="btnLoadDemo" title="Load demo data"><i class="fa-solid fa-database"></i></button>
          </div>
        </div>
        <div id="map"></div>
      </section>

      <!-- Notification -->
      <div id="notification" class="notification" aria-live="polite"></div>

      <!-- Search -->
      <section class="card">
        <input id="search" type="search" placeholder="Search gigs or shops (title, name, service)..." aria-label="Search gigs and shops" />
      </section>

      <!-- Forms / Actions -->
      <section id="main-actions" class="cards-grid">
        <div id="gig-list" class="card"></div>
        <aside id="shop-profile" class="card"></aside>
      </section>

      <section id="deliveries" class="card"></section>
    </main>

    <footer class="app-footer">
      <small>GigPi — built for Pi Network · Demo (frontend-only) · Deploy on GitHub Pages</small>
    </footer>
  </div>

  <!-- Modals (hidden by default) -->
  <!-- Gig Modal (2-step) -->
  <div id="modalGig" class="modal" aria-hidden="true">
    <div class="modal-inner card">
      <h2>Post Gig <small id="gigStepLabel">Step 1/2</small></h2>
      <div id="gigStep1" class="form-step">
        <label>Title
          <input id="gigTitle" type="text" placeholder="e.g., Deliver groceries" />
        </label>
        <div class="row">
          <button class="btn btn-secondary" id="cancelGig1">Cancel</button>
          <button class="btn" id="nextGig">Next</button>
        </div>
      </div>

      <div id="gigStep2" class="form-step" style="display:none;">
        <label>Price (Pi)
          <input id="gigPrice" type="number" step="0.1" min="0" placeholder="e.g., 5" />
        </label>
        <label>Location (optional text)
          <input id="gigLocationText" type="text" placeholder="e.g., Downtown, near market" />
        </label>
        <div class="row small">
          <button class="btn btn-tertiary" id="useMyLocGig"><i class="fa-solid fa-location-dot"></i> Use my location</button>
          <button class="btn btn-tertiary" id="pickOnMapGig"><i class="fa-solid fa-map-location"></i> Pick on map</button>
        </div>
        <div class="row">
          <button class="btn btn-secondary" id="prevGig">Back</button>
          <button class="btn" id="submitGig">Post Gig</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Shop Modal (2-step) -->
  <div id="modalShop" class="modal" aria-hidden="true">
    <div class="modal-inner card">
      <h2>Register Shop <small id="shopStepLabel">Step 1/2</small></h2>
      <div id="shopStep1" class="form-step">
        <label>Shop Name
          <input id="shopName" type="text" placeholder="e.g., Bob's Auto" />
        </label>
        <div class="row">
          <button class="btn btn-secondary" id="cancelShop1">Cancel</button>
          <button class="btn" id="nextShop">Next</button>
        </div>
      </div>

      <div id="shopStep2" class="form-step" style="display:none;">
        <label>Category
          <select id="shopCategory">
            <option value="supermarket">Supermarket</option>
            <option value="repair">Repair</option>
            <option value="auto">Auto</option>
            <option value="food">Food</option>
            <option value="other">Other</option>
          </select>
        </label>
        <label>Services (comma separated)
          <input id="shopServices" type="text" placeholder="e.g., Oil change, Repair" />
        </label>
        <label>Location (optional)
          <input id="shopLocationText" type="text" placeholder="e.g., 1st Main Road" />
        </label>
        <div class="row small">
          <button class="btn btn-tertiary" id="useMyLocShop"><i class="fa-solid fa-location-dot"></i> Use my location</button>
          <button class="btn btn-tertiary" id="pickOnMapShop"><i class="fa-solid fa-map-location"></i> Pick on map</button>
        </div>
        <div class="row">
          <button class="btn btn-secondary" id="prevShop">Back</button>
          <button class="btn" id="submitShop">Register Shop</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delivery Modal (single step) -->
  <div id="modalDelivery" class="modal" aria-hidden="true">
    <div class="modal-inner card">
      <h2>Book Delivery Block</h2>
      <label>Choose Block
        <select id="deliveryBlock">
          <option value="3h">3 hours — 10 Pi</option>
          <option value="6h">6 hours — 20 Pi</option>
        </select>
      </label>
      <div class="row">
        <button class="btn btn-secondary" id="cancelDelivery">Cancel</button>
        <button class="btn" id="startDelivery">Start Block</button>
      </div>
    </div>
  </div>

  <!-- Rating Modal -->
  <div id="modalRating" class="modal" aria-hidden="true">
    <div class="modal-inner card">
      <h2>Rate Experience</h2>
      <label>Rating
        <select id="ratingSelect">
          <option value="1">1 - Bad</option>
          <option value="2">2 - Poor</option>
          <option value="3">3 - Okay</option>
          <option value="4">4 - Good</option>
          <option value="5">5 - Excellent</option>
        </select>
      </label>
      <div class="row">
        <button class="btn btn-secondary" id="cancelRating">Skip</button>
        <button class="btn" id="submitRating">Submit Rating</button>
      </div>
    </div>
  </div>

  <!-- Spinner overlay for mock payments -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="spinner-card card">
      <div class="spinner"></div>
      <p id="overlayText">Processing pi payment...</p>
    </div>
  </div>

  <!-- App script -->
  <script src="script.js"></script>
</body>
</html>
